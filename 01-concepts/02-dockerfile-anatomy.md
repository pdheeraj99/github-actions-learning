# ğŸ³ 02 - Dockerfile Anatomy: Commands Explained

## 1. Dockerfile Ante Enti?

Dockerfile ante oka **recipe file** - Docker ki chepthundhi "Image ela build cheyalo".

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚   Biryani Cooking Analogy:                                                   â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                   â”‚
â”‚                                                                              â”‚
â”‚   Recipe Book     â†’     Biryani Cook chesav     â†’     Plate lo serve        â”‚
â”‚      ğŸ“‹                      ğŸ³                           ğŸ½ï¸                 â”‚
â”‚   Dockerfile           docker build               docker run                â”‚
â”‚   (instructions)       (Image ready!)             (Container running!)      â”‚
â”‚                                                                              â”‚
â”‚   Dockerfile = Recipe                                                        â”‚
â”‚   Image = Cooked Dish (ready, stored)                                       â”‚
â”‚   Container = Dish being served/eaten (live!)                               â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. FROM - Base Image Selection (Foundation Layer)

```dockerfile
FROM node:20-alpine AS builder
```

### 2.1 Ee Line Breakdown

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚   FROM  node:20-alpine  AS builder                                          â”‚
â”‚    â”‚      â”‚    â”‚    â”‚       â”‚                                                â”‚
â”‚    â”‚      â”‚    â”‚    â”‚       â””â”€â”€ Stage ki name (optional, multi-stage lo use)â”‚
â”‚    â”‚      â”‚    â”‚    â””â”€â”€ OS flavor (Alpine Linux - chala chinna!)            â”‚
â”‚    â”‚      â”‚    â””â”€â”€ Colon - version separator                                â”‚
â”‚    â”‚      â””â”€â”€ Version tag (Node.js 20)                                      â”‚
â”‚    â”‚                                                                         â”‚
â”‚    â””â”€â”€ Dockerfile instruction: "Docker, naku ee base kavali!"               â”‚
â”‚                                                                              â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                              â”‚
â”‚   Telugu Meaning:                                                            â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                            â”‚
â”‚   "Docker, naku oka ready-made Linux ichhi, dhaanilo Node.js 20 install     â”‚
â”‚    chesi unna version kavali, Alpine Linux variant lo!"                     â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Enduku Base Image Vadthaam?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚   BASE IMAGE LEKUNDA:                      BASE IMAGE THO:                   â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                      â•â•â•â•â•â•â•â•â•â•â•â•â•â•                    â”‚
â”‚                                                                              â”‚
â”‚   Nuvvu scratch nundi anni cheyali:       Ready ga vastundhi:               â”‚
â”‚   1. Linux install cheyyi                 FROM node:20-alpine               â”‚
â”‚   2. System packages install               (Antha done! âœ…)                  â”‚
â”‚   3. Node.js download                                                        â”‚
â”‚   4. Node.js install                                                         â”‚
â”‚   5. npm configure                                                           â”‚
â”‚   6. PATH set cheyyi                                                         â”‚
â”‚   7. ...50+ more steps!                                                      â”‚
â”‚                                                                              â”‚
â”‚   Time: 2-3 hours! ğŸ˜­                      Time: 2 seconds! ğŸš€              â”‚
â”‚                                                                              â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                              â”‚
â”‚   Analogy:                                                                   â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€                                                                   â”‚
â”‚   Base Image LEKUNDA = Scratch nundi biryani baniyinchali                   â”‚
â”‚                        (Rice grow cheyyi, chicken grow cheyyi, spices...)  â”‚
â”‚                                                                              â”‚
â”‚   Base Image THO = Restaurant ki velli, biryani order chesthe               â”‚
â”‚                    Ready-made vastundhi! Just eat! ğŸ½ï¸                       â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. WORKDIR - Working Directory Set Cheyyadam

```dockerfile
WORKDIR /app
```

### 3.1 Eemi Avuthundhi?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚   WORKDIR /app                                                               â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•                                                               â”‚
â”‚                                                                              â”‚
â”‚   Telugu Meaning: "Container lopala /app ane folder create cheyyi,          â”‚
â”‚                    ippudu nundi anni commands akkada run cheyyi!"           â”‚
â”‚                                                                              â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                              â”‚
â”‚   BEFORE WORKDIR:                         AFTER WORKDIR /app:                â”‚
â”‚                                                                              â”‚
â”‚   Container:                              Container:                         â”‚
â”‚   /                                       /                                  â”‚
â”‚   â”œâ”€â”€ bin/                                â”œâ”€â”€ bin/                           â”‚
â”‚   â”œâ”€â”€ etc/                                â”œâ”€â”€ etc/                           â”‚
â”‚   â”œâ”€â”€ usr/                                â”œâ”€â”€ usr/                           â”‚
â”‚   â””â”€â”€ home/                               â”œâ”€â”€ home/                          â”‚
â”‚                                           â””â”€â”€ app/  â† CREATED! ğŸ“           â”‚
â”‚                                                                              â”‚
â”‚   Current directory: /                    Current directory: /app            â”‚
â”‚                                           (Like doing: mkdir /app && cd /app)â”‚
â”‚                                                                              â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                              â”‚
â”‚   Terminal Analogy:                                                          â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                          â”‚
â”‚   Normal ga eemi chesthav?                                                   â”‚
â”‚   > mkdir app                                                                â”‚
â”‚   > cd app                                                                   â”‚
â”‚   > pwd        â† shows /app                                                 â”‚
â”‚                                                                              â”‚
â”‚   WORKDIR /app = Same thing in Dockerfile!                                  â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 âš ï¸ Gotcha - Common Mistakes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚   âŒ WRONG:                               âœ… CORRECT:                        â”‚
â”‚                                                                              â”‚
â”‚   WORKDIR /home/user/myproject           WORKDIR /app                       â”‚
â”‚   (Too deep, unnecessary!)               (Clean, industry standard!)        â”‚
â”‚                                                                              â”‚
â”‚   WORKDIR /                                                                  â”‚
â”‚   (Root lo work cheyyadam security risk!)                                   â”‚
â”‚                                                                              â”‚
â”‚   No WORKDIR at all                                                          â”‚
â”‚   (Files random places lo pothay - mess avuthundhi!)                        â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. COPY - Files Copy Cheyyadam (Host â†’ Container)

```dockerfile
COPY package*.json ./
COPY . .
```

### 4.1 Syntax Breakdown

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚   COPY  <source>  <destination>                                              â”‚
â”‚          â”‚           â”‚                                                       â”‚
â”‚          â”‚           â””â”€â”€ Container lo EKKADA pettali                        â”‚
â”‚          â””â”€â”€ Windows (nee PC) lo EKKADA nunchi teesukovali                  â”‚
â”‚                                                                              â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                              â”‚
â”‚   Example 1: COPY package*.json ./                                          â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                           â”‚
â”‚                                                                              â”‚
â”‚   NEE WINDOWS:                           CONTAINER:                          â”‚
â”‚   D:\todo-frontend\                      /app/                              â”‚
â”‚   â”œâ”€â”€ package.json     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”œâ”€â”€ package.json âœ…                â”‚
â”‚   â”œâ”€â”€ package-lock.json â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”œâ”€â”€ package-lock.json âœ…           â”‚
â”‚   â”œâ”€â”€ src/                               â”‚                                   â”‚
â”‚   â””â”€â”€ node_modules/                      â”‚                                   â”‚
â”‚                                                                              â”‚
â”‚   package*.json = package.json + package-lock.json (wildcard pattern)       â”‚
â”‚   ./            = current directory (container lo /app/)                    â”‚
â”‚                                                                              â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                              â”‚
â”‚   Example 2: COPY . .                                                        â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                        â”‚
â”‚                                                                              â”‚
â”‚   NEE WINDOWS:                           CONTAINER:                          â”‚
â”‚   D:\todo-frontend\                      /app/                              â”‚
â”‚   â”œâ”€â”€ src/              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”œâ”€â”€ src/                           â”‚
â”‚   â”‚   â”œâ”€â”€ App.tsx                        â”‚   â”œâ”€â”€ App.tsx                    â”‚
â”‚   â”‚   â””â”€â”€ main.tsx                       â”‚   â””â”€â”€ main.tsx                   â”‚
â”‚   â”œâ”€â”€ index.html        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”œâ”€â”€ index.html                     â”‚
â”‚   â”œâ”€â”€ package.json      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”œâ”€â”€ package.json                   â”‚
â”‚   â””â”€â”€ node_modules/     â”€â”€â”€â”€â”€â”€â”€Xâ”€â”€â”€â”€â”€â”€â”€â”€                                    â”‚
â”‚        (COPY AVVADHU!)   .dockerignore lo undhi!                            â”‚
â”‚                                                                              â”‚
â”‚   . = current directory (Dockerfile unna folder)                            â”‚
â”‚   COPY . . = "Anni files copy cheyyi (except .dockerignore items)"         â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 Chala Important: COPY ekkada avuthundhi?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚   âš ï¸ CONFUSION CLEAR CHESKODHAM:                                            â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                            â”‚
â”‚                                                                              â”‚
â”‚   COPY . . run chesthe...                                                    â”‚
â”‚                                                                              â”‚
â”‚   NEE WINDOWS lo emi avvadhu!     â† Files akkade untay, change avvavu!      â”‚
â”‚   CONTAINER lopala copy avuthundhi! â† Here the magic happens!               â”‚
â”‚                                                                              â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                              â”‚
â”‚   Flow:                                                                      â”‚
â”‚   â”€â”€â”€â”€â”€â”€                                                                     â”‚
â”‚   Windows (Source)                                                           â”‚
â”‚   D:\todo-frontend\                                                          â”‚
â”‚   â”œâ”€â”€ src/App.tsx                                                            â”‚
â”‚   â””â”€â”€ ...                                                                    â”‚
â”‚        â”‚                                                                     â”‚
â”‚        â”‚  COPY . .                                                           â”‚
â”‚        â”‚  (Network transfer Windows â†’ Container)                            â”‚
â”‚        â–¼                                                                     â”‚
â”‚   Container (Destination)                                                    â”‚
â”‚   /app/                                                                      â”‚
â”‚   â”œâ”€â”€ src/App.tsx â† Now inside container!                                   â”‚
â”‚   â””â”€â”€ ...                                                                    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. RUN - Commands Execute Cheyyadam (Build Time lo)

```dockerfile
RUN npm ci
RUN npm run build
```

### 5.1 RUN vs CMD - Chala Important Difference

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚   RUN                                      CMD                               â”‚
â”‚   â•â•â•                                      â•â•â•                               â”‚
â”‚                                                                              â”‚
â”‚   â€¢ BUILD time lo run avuthundhi          â€¢ Container START chesthe run     â”‚
â”‚   â€¢ Image create avuthunappudu            â€¢ Container start avuthunappudu   â”‚
â”‚   â€¢ Result IMAGE lo save avuthundhi       â€¢ Every docker run ki execute     â”‚
â”‚   â€¢ Multiple RUN commands okay            â€¢ Oka CMD maatrame! (last one)    â”‚
â”‚                                                                              â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                              â”‚
â”‚   Analogy:                                                                   â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€                                                                   â”‚
â”‚   RUN = Biryani PREPARE chese steps (rice cook, chicken fry - one time!)   â”‚
â”‚   CMD = Biryani SERVE chese step (plate lo pettu - every order ki!)        â”‚
â”‚                                                                              â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                              â”‚
â”‚   Timeline:                                                                  â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                  â”‚
â”‚                                                                              â”‚
â”‚   docker build â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ IMAGE created!                â”‚
â”‚        â”‚                                                                     â”‚
â”‚        â”œâ”€â”€ FROM node:20-alpine                                              â”‚
â”‚        â”œâ”€â”€ WORKDIR /app                                                      â”‚
â”‚        â”œâ”€â”€ COPY package.json                                                 â”‚
â”‚        â”œâ”€â”€ RUN npm ci â† EXECUTES HERE! (during build)                       â”‚
â”‚        â”œâ”€â”€ COPY . .                                                          â”‚
â”‚        â”œâ”€â”€ RUN npm run build â† EXECUTES HERE! (during build)                â”‚
â”‚        â””â”€â”€ CMD ["nginx"]                                                     â”‚
â”‚                                                                              â”‚
â”‚   docker run â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Container running!           â”‚
â”‚        â”‚                                                                     â”‚
â”‚        â””â”€â”€ CMD ["nginx"] â† EXECUTES HERE! (every container start)           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 RUN ekkada execute avuthundhi?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚   âš ï¸ COMMON CONFUSION:                                                       â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                      â”‚
â”‚                                                                              â”‚
â”‚   "RUN npm ci chesthe naa Windows lo node_modules install avuthundha?"      â”‚
â”‚                                                                              â”‚
â”‚   ANSWER: KAADHU! âŒ                                                         â”‚
â”‚                                                                              â”‚
â”‚   RUN npm ci:                                                                â”‚
â”‚   â€¢ Container LOPALA execute avuthundhi                                     â”‚
â”‚   â€¢ Container lo npm use avuthundhi (not your Windows npm!)                 â”‚
â”‚   â€¢ Container lo /app/node_modules create avuthundhi                        â”‚
â”‚   â€¢ NEE WINDOWS LO EMMI AVVADHU!                                            â”‚
â”‚                                                                              â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                              â”‚
â”‚   Visual:                                                                    â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€                                                                   â”‚
â”‚   Windows                        Container                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚   â”‚ D:\todo-frontend â”‚          â”‚ /app/            â”‚                        â”‚
â”‚   â”‚ (No change here!)â”‚          â”‚ â”œâ”€â”€ package.json â”‚                        â”‚
â”‚   â”‚                  â”‚   RUN    â”‚ â””â”€â”€ node_modules/â”‚ â† Created HERE!        â”‚
â”‚   â”‚                  â”‚  npm ci  â”‚     â”œâ”€â”€ react/   â”‚                        â”‚
â”‚   â”‚                  â”‚ â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚     â”œâ”€â”€ vite/    â”‚                        â”‚
â”‚   â”‚                  â”‚          â”‚     â””â”€â”€ ...500MB â”‚                        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. EXPOSE - Port Document Cheyyadam

```dockerfile
EXPOSE 80
```

### 6.1 EXPOSE Does NOT Open Ports

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚   âš ï¸ COMMON MISCONCEPTION:                                                   â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                  â”‚
â”‚                                                                              â”‚
â”‚   "EXPOSE 80 vesthe port open avuthundhi" - WRONG! âŒ                        â”‚
â”‚                                                                              â”‚
â”‚   EXPOSE is just DOCUMENTATION!                                              â”‚
â”‚   Like a NOTE: "Hey, this app uses port 80"                                 â”‚
â”‚                                                                              â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                              â”‚
â”‚   EXPOSE 80          â†’  Just a label (doesn't open port!)                   â”‚
â”‚                                                                              â”‚
â”‚   To ACTUALLY open:                                                          â”‚
â”‚   docker run -p 8080:80 my-image                                            â”‚
â”‚               â”‚     â”‚                                                        â”‚
â”‚               â”‚     â””â”€â”€ Container port (from EXPOSE)                        â”‚
â”‚               â””â”€â”€ Your machine port (localhost:8080)                        â”‚
â”‚                                                                              â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                              â”‚
â”‚   Telugu Explanation:                                                        â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                       â”‚
â”‚   EXPOSE 80 = "Ee app 80 port vaduthundhi" ani Dockerfile lo note pettadam  â”‚
â”‚   docker run -p = Actually port open chesi traffic allow cheyyadam          â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. CMD - Default Startup Command

```dockerfile
CMD ["nginx", "-g", "daemon off;"]
```

### 7.1 Container Start ayinappudu eemi run avvali?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚   CMD = Container Start ayinappudu default ga run ayye command              â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•            â”‚
â”‚                                                                              â”‚
â”‚   Dockerfile lo:                                                             â”‚
â”‚   CMD ["nginx", "-g", "daemon off;"]                                        â”‚
â”‚                                                                              â”‚
â”‚   Telugu: "Container start ayinappudu nginx start cheyyi"                   â”‚
â”‚                                                                              â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                              â”‚
â”‚   ARRAY SYNTAX vs STRING SYNTAX:                                             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚
â”‚                                                                              â”‚
â”‚   âœ… RECOMMENDED (Exec form):                                                â”‚
â”‚   CMD ["nginx", "-g", "daemon off;"]                                        â”‚
â”‚   â€¢ Direct execution                                                         â”‚
â”‚   â€¢ No shell overhead                                                        â”‚
â”‚   â€¢ Signals work correctly                                                   â”‚
â”‚                                                                              â”‚
â”‚   âš ï¸ SHELL FORM (avoid if possible):                                        â”‚
â”‚   CMD nginx -g "daemon off;"                                                â”‚
â”‚   â€¢ Runs through /bin/sh -c                                                 â”‚
â”‚   â€¢ Signal handling issues                                                   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. Complete Dockerfile Example with Telugu Comments

```dockerfile
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# DOCKERFILE - React Todo App
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# 1. BASE IMAGE: Node.js 20 on Alpine Linux
#    Ready-made Linux + Node.js - manam scratch nundi install cheyakkarledu!
FROM node:20-alpine AS builder

# 2. WORKING DIRECTORY: Container lopala /app folder lo work chesthaam
WORKDIR /app

# 3. PACKAGE FILES COPY: First ee files copy - caching kosam! (Next file lo explain)
COPY package*.json ./

# 4. DEPENDENCIES INSTALL: Container lopala npm ci run avuthundhi
#    Nee Windows lo kaadu - container lopala!
RUN npm ci

# 5. SOURCE CODE COPY: Remaining files copy
COPY . .

# 6. BUILD: Vite build - container lopala /app/dist create avuthundhi
RUN npm run build

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# STAGE 2: PRODUCTION (Multi-stage - next file lo detail ga!)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FROM nginx:alpine

# 7. COPY FROM PREVIOUS STAGE: Stage 1 nunchi dist/ maatrame teesukuntunnam
COPY --from=builder /app/dist /usr/share/nginx/html

# 8. EXPOSE: Documentation - 80 port use chesthunnam
EXPOSE 80

# 9. STARTUP COMMAND: Container start aythe nginx start avuthundhi
CMD ["nginx", "-g", "daemon off;"]
```

---

## ğŸ¯ Summary Table

| Command | Eppudu Run Avuthundhi | Eemi Chesthundhi |
|---------|----------------------|------------------|
| FROM | Build start | Base image select |
| WORKDIR | Build time | Working directory create |
| COPY | Build time | Files copy (Windows â†’ Container) |
| RUN | Build time | Commands execute (Container lopala!) |
| EXPOSE | Never (just doc) | Port documentation |
| CMD | Container start | Startup command |

---

## ğŸ‘‰ Next: [03-multistage-build.md](./03-multistage-build.md) - Multi-stage build magic nerchukondham
